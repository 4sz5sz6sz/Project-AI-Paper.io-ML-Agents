# ğŸ® CNN + LSTM Paper.io AI í•™ìŠµ ê°€ì´ë“œ

## ğŸ“‹ 1ë‹¨ê³„: Unity Inspector ì„¤ì • ë³€ê²½ (ë§¤ìš° ì¤‘ìš”!)

### ğŸ¯ ê° Player Prefab ì„¤ì • ë³€ê²½:
1. Unity Editor ì—´ê¸°
2. Project ìœˆë„ìš° â†’ Assets â†’ Prefabs í´ë”
3. ë‹¤ìŒ 4ê°œ íŒŒì¼ì„ ìˆœì„œëŒ€ë¡œ ì„¤ì •:

### Player1.prefab ì„¤ì •:
- Player1.prefab ë”ë¸”í´ë¦­ ë˜ëŠ” ì„ íƒ
- Inspector ìœˆë„ìš°ì—ì„œ "Behavior Parameters" ì»´í¬ë„ŒíŠ¸ ì°¾ê¸°
- ë‹¤ìŒ ê°’ë“¤ ë³€ê²½:
  * Behavior Name: Basic â†’ CNN_LSTM_Agent
  * Vector Observation Size: 1334 â†’ 84
  * Use Child Sensors: true (ì²´í¬ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸)
- Ctrl+Së¡œ ì €ì¥

### Player2.prefab ì„¤ì •:
- Player2.prefab ì„ íƒ
- Inspector â†’ Behavior Parameters:
  * Behavior Name: Basic â†’ CNN_LSTM_Agent  
  * Vector Observation Size: 1334 â†’ 84
  * Use Child Sensors: true (ì²´í¬ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸)
- Ctrl+Së¡œ ì €ì¥

### Player3.prefab ì„¤ì •:
- Player3.prefab ì„ íƒ  
- Inspector â†’ Behavior Parameters:
  * Behavior Name: Basic â†’ CNN_LSTM_Agent
  * Vector Observation Size: 1334 â†’ 84
  * Use Child Sensors: true (ì²´í¬ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸)
- Ctrl+Së¡œ ì €ì¥

### Player4.prefab ì„¤ì •:
- Player4.prefab ì„ íƒ
- Inspector â†’ Behavior Parameters:
  * Behavior Name: Basic â†’ CNN_LSTM_Agent
  * Vector Observation Size: 1334 â†’ 84  
  * Use Child Sensors: true (ì²´í¬ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸)
- Ctrl+Së¡œ ì €ì¥

### âœ… í™•ì¸ì‚¬í•­:
- ëª¨ë“  Playerì˜ Behavior Nameì´ "CNN_LSTM_Agent"ë¡œ ë™ì¼í•œì§€ í™•ì¸
- ëª¨ë“  Playerì˜ Vector Observation Sizeê°€ 84ë¡œ ë™ì¼í•œì§€ í™•ì¸
- Use Child Sensorsê°€ ëª¨ë‘ trueì¸ì§€ í™•ì¸ (Visual Observation í™œì„±í™”ìš©)

## ğŸš€ 2ë‹¨ê³„: í•™ìŠµ ì‹œì‘

### í„°ë¯¸ë„ ëª…ë ¹ì–´:
```bash
# 1. Conda í™˜ê²½ í™œì„±í™”
conda activate mlagents

# 2. CNN + LSTM í•™ìŠµ ì‹œì‘
mlagents-learn cnn_lstm_config.yaml --run-id=CNN_LSTM_run
```

### ëŒ€ì²´ ëª…ë ¹ì–´ (í˜¹ì‹œ ë¬¸ì œ ìƒê¸°ë©´):
```bash
# íŠ¹ì • í¬íŠ¸ ì§€ì •
mlagents-learn cnn_lstm_config.yaml --run-id=CNN_LSTM_run --base-port=5005

# ê¸°ì¡´ í•™ìŠµ ì´ì–´ì„œ í•˜ê¸° (ë‚˜ì¤‘ì— ì¤‘ë‹¨ í›„ ì¬ì‹œì‘í•  ë•Œ)
mlagents-learn cnn_lstm_config.yaml --run-id=CNN_LSTM_run --resume
```

## ğŸ® 3ë‹¨ê³„: Unityì—ì„œ í•™ìŠµ ì—°ê²°

1. í„°ë¯¸ë„ì—ì„œ í•™ìŠµ ì‹œì‘ í›„ "Start training by pressing the Play button in the Unity Editor" ë©”ì‹œì§€ í™•ì¸
2. Unity Editorë¡œ ëŒì•„ê°€ê¸°
3. Play ë²„íŠ¼ (â–¶ï¸) í´ë¦­
4. í•™ìŠµ ìë™ ì—°ê²° ë° ì‹œì‘

## ğŸ“Š 4ë‹¨ê³„: í•™ìŠµ ëª¨ë‹ˆí„°ë§

### í„°ë¯¸ë„ ì¶œë ¥ í™•ì¸:
```
[INFO] Connected to Unity environment with package version X.X.X
[INFO] Connected new brain with behavior name: CNN_LSTM_Agent
[INFO] Hyperparameters for behavior name CNN_LSTM_Agent:
  - CNN: Visual Observation í™œì„±í™”
  - LSTM: Memory 256, Sequence 64  
  - Time Horizon: 20 (ì§§ì€ ê³„íš)

ë§¤ 2000ìŠ¤í…ë§ˆë‹¤:
[INFO] Step: 2000. Mean Reward: -45.2. Std: 12.1
[INFO] Step: 4000. Mean Reward: -32.8. Std: 15.3
...
```

### Tensorboard ëª¨ë‹ˆí„°ë§ (ì„ íƒì‚¬í•­):
```bash
# ë³„ë„ í„°ë¯¸ë„ì—ì„œ
tensorboard --logdir results
# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:6006 ì ‘ì†
```

## âš ï¸ ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë“¤:

1. **Behavior name ì—ëŸ¬:**
```
[ERROR] Behavior name 'Basic' not found in trainer config
â†’ Unity Inspectorì—ì„œ ëª¨ë“  Playerì˜ Behavior Nameì„ CNN_LSTM_Agentë¡œ ì œëŒ€ë¡œ ë³€ê²½í–ˆëŠ”ì§€ í™•ì¸
```

2. **Vector size ë¶ˆì¼ì¹˜:**
```
[ERROR] Vector observation size mismatch  
â†’ Unity Inspectorì—ì„œ Vector Observation Sizeê°€ 84ì¸ì§€ í™•ì¸
â†’ MyAgent.cs ì½”ë“œì—ì„œ ì‹¤ì œë¡œ 84ì°¨ì›ì„ ìƒì„±í•˜ëŠ”ì§€ í™•ì¸
```

3. **Unity ì—°ê²° ì‹¤íŒ¨:**
```
â†’ Unity Play ë²„íŠ¼ì„ ëˆŒë €ëŠ”ì§€ í™•ì¸
â†’ í„°ë¯¸ë„ì—ì„œ í•™ìŠµì´ ì œëŒ€ë¡œ ì‹œì‘ë˜ì—ˆëŠ”ì§€ í™•ì¸
```

## ğŸ¯ í•™ìŠµ ì„¤ì • ì •ë³´

í˜„ì¬ cnn_lstm_config.yaml ì„¤ì •:
- **CNN**: Visual Observation (84x84 ì´ë¯¸ì§€)
- **LSTM**: Memory 256, Sequence 64 (ê³¼ê±° 64ìŠ¤í… ê¸°ì–µ)
- **Vector**: 84ì°¨ì› (ê²Œì„ ìƒíƒœ ì •ë³´)
- **Time Horizon**: 20 (ì§§ê³  ì•ˆì „í•œ ê³„íš)
- **Summary Freq**: 2000 (2000ìŠ¤í…ë§ˆë‹¤ ì§„í–‰ìƒí™© ì¶œë ¥)

## ğŸ“ˆ í•™ìŠµ ì™„ë£Œ í›„

í•™ìŠµëœ ëª¨ë¸ì€ ë‹¤ìŒ ìœ„ì¹˜ì— ì €ì¥ë©ë‹ˆë‹¤:
```
results/CNN_LSTM_run/CNN_LSTM_Agent/
â”œâ”€â”€ CNN_LSTM_Agent-XXXXX.onnx  â† í•™ìŠµëœ ëª¨ë¸
â”œâ”€â”€ configuration.yaml          â† í•™ìŠµ ì„¤ì • ê¸°ë¡
â””â”€â”€ run_logs/                   â† í•™ìŠµ ë¡œê·¸
```

## ğŸ® í•™ìŠµëœ ëª¨ë¸ ì‚¬ìš©í•˜ê¸°

1. Unity Inspector â†’ Behavior Parameters:
   - Model í•„ë“œì— ìƒì„±ëœ .onnx íŒŒì¼ ë“œë˜ê·¸
   - Behavior Type: Default
2. Play ë²„íŠ¼ìœ¼ë¡œ AI í”Œë ˆì´ í™•ì¸

---

## ğŸ’¡ ì°¸ê³ ì‚¬í•­

- **CNN**: ê° í”Œë ˆì´ì–´ì˜ ì‹œì•¼ë¥¼ ì´ë¯¸ì§€ë¡œ í•™ìŠµ
- **LSTM**: ê³¼ê±° í–‰ë™ íŒ¨í„´ì„ ê¸°ì–µí•˜ì—¬ ë” ë˜‘ë˜‘í•œ íŒë‹¨
- **Time Horizon 20**: ë§¤ìš° ë³´ìˆ˜ì ì´ê³  ì•ˆì „í•œ í”Œë ˆì´ ìŠ¤íƒ€ì¼
- **ìš”ì•½ ë¹ˆë„ 2000**: í•™ìŠµ ì§„í–‰ìƒí™©ì„ ìì£¼ í™•ì¸ ê°€ëŠ¥

**ğŸ¯ ì¤‘ìš”**: Unity Inspector ì„¤ì •ì„ ì •í™•íˆ í•´ì•¼ í•™ìŠµì´ ì œëŒ€ë¡œ ë©ë‹ˆë‹¤!
